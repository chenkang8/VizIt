<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Our Orbital Project">
  <meta name="author" content="">
  <meta name="generator" content="Hugo 0.83.1">
  <title>Team SU: VizIT</title>

  <!-- Bootstrap core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
    crossorigin="anonymous"></script>

  <!-- JQuery -->  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> 

  <!-- Custom styles for this template -->
  <!-- Without Flask (Raw Support) -->
  <link rel="stylesheet" href="../static/cover.css">
  <!-- Flask URL -->
  <link rel="stylesheet" href="{{ url_for('static', filename='cover.css') }}"> 

  <style>
  
    #f1-formpage-top-listing-d {
      /* border: 1px solid #A8A8A8; */
      border-radius: 10px 0px 0px 10px;
    }

    #f1-formpage-top-price-d {
      border-radius: 0px 10px 0px 0px;
      border-bottom: 1px solid transparent !important; 
    }

    #f1-formpage-top-btn-group {
      border-radius: 0px 0px 10px 10px;
    }

    #f1-formpage-top-btn-group > .btn:first-child {
      border-bottom-left-radius: 10px;
    }

    #f1-formpage-top-btn-group > .btn:last-child {
      border-bottom-right-radius: 10px;
    }

    #f1-formpage-top-btn-group > .btn:not(:last-child) {
      border-top-left-radius: 0;
    }

    #f1-formpage-top-btn-group > .btn:not(:first-child) {
      border-top-right-radius: 0;
      margin-left: 0;
    }
    
    :root {
      --price-3room-color: #FB9130;
      --price-3room-color-dark: #cd6403;
      --price-4room-color: #23B844;
      --price-4room-color-dark: #18802f;
      --price-5room-color: #074EE8;
      --price-5room-color-dark: #00478e;
    }

    .price-3room {
      background: var(--price-3room-color);
    }

    .price-4room {
      background: var(--price-4room-color);
    }

    .price-5room {
      background: var(--price-5room-color);
    }

    .price-unavailable {
      background: grey;
    }

    #f1-formpage-top-btn-group .btn {
      transition: all 0.3s ease 0s;
      color: #fff;
    }

    #f1-formpage-top-btn-group .btn[name="3room"]:hover {
      background: var(--price-3room-color-dark);
    }

    #f1-formpage-top-btn-group .btn[name="4room"]:hover {
      background: var(--price-4room-color-dark);
    }

    #f1-formpage-top-btn-group .btn[name="5room"]:hover {
      background: var(--price-5room-color-dark);
    }

  </style>

  <script>
    // Populate serverside
    var room_prices = {"3room": '{{price3Room}}', "4room": '{{price4Room}}', "5room": '{{price5Room}}'};
    //var room_prices = {"3room": '-1', "4room": '{{price4Room}}', "5room": '{{price5Room}}'};
  </script>

</head>

<body class="body-bg-2">
  <!-- Form -->
  <form method="POST" action="/homeformresultpage">

  <!-- Flat, price and type -->
  <div class="container my-3">

    <!-- Infomation Display -->
    <div class="row justify-content-between align-items-center">
      <!-- Left: Listing Name -->
      <div id="f1-formpage-top-listing-d" class="col-sm-8 p-3 border border-end-0 bg-light form-big-text">{{ listing_name }}</div>
      <!-- Right: -->
      <div id="f1-formpage-top-price-d" class="col-sm-4 p-3 border price-unavailable">
        <div id="prices" class="form-big-text">$000000</div>
        <input type="hidden" id="f1-form-price-input" name="flatPrice">  
      </div>
    </div>

    <!-- Buttons -->
    <div class="row justify-content-end">
      <div class="col-sm-4 px-0">
        <div id="f1-formpage-top-btn-group" class="btn-group w-100 border border-top-0" 
          role="group" aria-label="Flat Type Selection">
          <label id="btnlabel3room" class="btn price-3room" for="btnradio3room"> 3 Room
            <input type="radio" class="btn-check" name="flatType" id="btnradio3room" value="3room" autocomplete="off">
          </label>
          <label id="btnlabel4room" class="btn price-4room" for="btnradio4room">4 Room
            <input type="radio" class="btn-check" name="flatType" id="btnradio4room" value="4room" autocomplete="off">
          </label>
          <label id="btnlabel5room" class="btn price-5room" for="btnradio5room">5 Room
            <input type="radio" class="btn-check" name="flatType" id="btnradio5room" value="5room" autocomplete="off">
          </label>
        </div>

        <script>
          /*
           * Handlers for toggling of button
           * COMMENT: Depreciated JQuery in favor of native javascript, which is much faster  
          */
          var btnGroup = document.getElementById("f1-formpage-top-btn-group");
          // Initialize state for the button selector
          var initial_price = 0;
          var initial_color = ""
          for (var r=5; r >= 3; r--) {
            var key = r.toString() + "room"; 
            var value = room_prices[key];
            if (value == -1) {
              document.getElementById("btnlabel" + key).className = "btn disabled price-unavailable";
            } else {
              initial_price = value;
              initial_color = key;
            }
          }
          document.getElementById("prices").textContent = "$" + initial_price;
          document.getElementById("f1-formpage-top-price-d").style.backgroundColor = "var(--price-" + initial_color +"-color)";

          // Bind event listeners to our radio buttons
          btnGroup.querySelectorAll('input[type="radio"]').forEach((elem) => {
            elem.addEventListener("change", function(event) {
              var selectedflatType = event.target.value;
              // Update Price display text
              var price = room_prices[selectedflatType];
              document.getElementById("prices").textContent = "$" + price;
              // Update Price display styling
              var setCSS = "var(--price-" + selectedflatType +"-color)";
              document.getElementById("f1-formpage-top-price-d").style.backgroundColor = setCSS;
              // Update Price data input(used for passing data)
              document.getElementById("f1-form-price-input").value = price;
            });
          });
        </script>

      </div>
    </div>
    
  </div>

  <!-- User Details Input -->
  <div class="container bg-light border round-corners">
    <!-- Info message -->
    <div class="row justify-content-between align-items-center">
      <div class="col p-3 form-helper-msg form-text">Tell us about yourself and weâ€™ll tell you how much you need</div>
    </div>

    <!-- Form -->
      <div class="row justify-content-between align-items-center">
        <div class="col-sm-4 p-3">
          <label for="mstatus" class="form-text">Maritial Status:</label><br>
          <select id="mstatus" name="mstatus" class="w-50">
              <option value="Single">Single</option>
              <option value="Married">Married</option>
          </select>
        </div>

        <div class="col-sm-4 p-3">
          <label for="age" class="form-text">Age:</label><br>
          <input type="number" id="age" name="age" placeholder="35" class="w-50"><br>
        </div>

        <div class="col-sm-4 p-3">
          <label for="nationality" class="form-text">Nationality:</label><br>
            <select id="nationality" name="nationality" class="w-50">
                <option value="singaporean">Singapore Citizen</option>
                <option value="singaporePR">PR</option>
                <option value="nsingaporean">Non-Singapore Citizen</option>
            </select><br>
        </div>
      </div>

      <div class="row justify-content-between align-items-center">

        <div class="col-sm-4"><div class="p-3 border bg-light">
          <label for="firstTime" class="form-text">Spouse also first-time:</label><br>
          <select id="firstTime" name="firstTime" class="w-50">
              <option value="true">True</option>
              <option value="false">False</option>
            </select><br>
        </div></div>

        <div class="col-sm-4"><div class="p-3 border bg-light">
          <label for="mthInc" class="form-text">Monthly Income (SGD):</label><br>
          <input type="number" id="mthInc" name="mthInc" placeholder="4500" class="w-50"><br>
        </div></div>

        <div class="col-sm-4"><div class="p-3 border bg-light">
          <label for="estDist" class="form-text">Estimated Distance to Parent's Home:</label><br>
          <select id="estDist" name="estDist" class="w-50">
              <option value="under">Under 4km</option>
              <option value="over">Over 4km</option>
            </select><br>
        </div></div>

      </div>
  </div>

  <!-- Buttons -->
  <div class="container my-3">
    <div class="row">
      <div class = "col-sm-12 d-flex justify-content-center">
        <button type="submit" class="btn btn-danger form-btm-btn">Calculate</button> 
      </div>
    </div>
  </div>

  </form>

</body>

</html>